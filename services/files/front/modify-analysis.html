<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <title>Modifier une analyse - IA-DAS</title>
    <link rel="stylesheet" href="./modify-analysis/modify-analysis.css">
</head>

<body>
    <header>
        <h1>Modifier une analyse existante</h1>
        <img src="./assets/logo_IA-DAS-No-Background.png" alt="Logo IA-DAS" class="logo">
        <button id="backToUpdate" onclick="window.location.href = './update-page.html'">Retour</button>
    </header>

    <main class="modify-container">
        <div id="selection-step" class="step-container">
            <section class="selection-section">
                <h2>Sélectionner l'analyse à modifier</h2>
                <div class="search-container">
                    <div class="form-group">
                        <label for="analysisIdSearch">ID de l'analyse à modifier</label>
                        <input type="text" id="analysisIdSearch" name="analysisIdSearch" placeholder="Ex: 6000, test_001, MEGA_TEST_001...">
                    </div>
                    <div class="search-actions">
                        <button id="searchBtn" class="btn-primary">Rechercher l'analyse</button>
                        <button id="loadAllBtn" class="btn-secondary">Voir toutes les analyses</button>
                    </div>
                </div>
                
                <div id="search-results" class="results-container" style="display: none;">
                    <h3>Analyses trouvées</h3>
                    <div id="analyses-list" class="analyses-list"></div>
                </div>
            </section>
        </div>

        <div id="edit-step" class="step-container" style="display: none;">
            <div class="edit-header">
                <h2>Modification de l'analyse : <span id="current-analysis-id"></span></h2>
                <button id="backToSearch" class="btn-secondary">Changer d'analyse</button>
            </div>

            <form id="modifyAnalysisForm" class="form-container">
                <section class="form-section">
                    <h2>Informations sur l'article</h2>
                    <div class="form-group">
                        <label for="doi">DOI de l'article</label>
                        <input type="text" id="doi" name="doi">
                    </div>
                    <div class="form-group">
                        <label for="title">Titre de l'article</label>
                        <input type="text" id="title" name="title">
                    </div>
                    <div class="form-group">
                        <label for="authors">Auteurs</label>
                        <input type="text" id="authors" name="authors">
                    </div>
                    <div class="form-group">
                        <label for="journal">Journal</label>
                        <input type="text" id="journal" name="journal">
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="year">Année</label>
                            <input type="number" id="year" name="year" min="1900" max="2030">
                        </div>
                        <div class="form-group">
                            <label for="country">Pays</label>
                            <input type="text" id="country" name="country">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="studyType">Type d'étude</label>
                        <input type="text" id="studyType" name="studyType">
                    </div>
                </section>

                <section class="form-section">
                    <h2>Informations sur l'analyse</h2>
                    <div class="form-group">
                        <label for="analysisId">ID de l'analyse (non modifiable)</label>
                        <input type="text" id="analysisId" name="analysisId" >
                    </div>
                    <div class="form-group">
                        <label for="typeOfAnalysis">Type d'analyse</label>
                        <input type="text" id="typeOfAnalysis" name="typeOfAnalysis">
                    </div>
                    <div class="form-group">
                        <label for="analysisMultiplicity">Multiplicité de l'analyse</label>
                        <input type="text" id="analysisMultiplicity" name="analysisMultiplicity">
                    </div>
                    <div class="form-group">
                        <label for="relationDegree">Degré de relation</label>
                        <input type="text" id="relationDegree" name="relationDegree">
                    </div>
                    <div class="form-group">
                        <label for="sampleSizeMobilized">Taille d'échantillon mobilisée</label>
                        <input type="number" id="sampleSizeMobilized" name="sampleSizeMobilized" min="1">
                    </div>
                    <div class="form-group">
                        <label for="authorConclusion">Conclusions des auteurs</label>
                        <textarea id="authorConclusion" name="authorConclusion" rows="2"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="limites">Limites</label>
                        <textarea id="limites" name="limites" rows="2"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="perspectives">Perspectives</label>
                        <textarea id="perspectives" name="perspectives" rows="2"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="acads">ACADS</label>
                        <input type="text" id="acads" name="acads">
                    </div>
                </section>

                <section class="form-section">
                    <h2>Population d'étude</h2>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="sampleSize">Taille d'échantillon total</label>
                            <input type="number" id="sampleSize" name="sampleSize" min="1">
                        </div>
                        <div class="form-group">
                            <label for="gender">Genre</label>
                            <input type="text" id="gender" name="gender">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="population">Description de la population</label>
                        <textarea id="population" name="population" rows="2"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="inclusionCriteria">Critères d'inclusion</label>
                        <textarea id="inclusionCriteria" name="inclusionCriteria" rows="2"></textarea>
                    </div>
                    
                    <h3>Statistiques d'âge</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="meanAge">Âge moyen</label>
                            <input type="number" id="meanAge" name="meanAge" step="0.1" min="0">
                        </div>
                        <div class="form-group">
                            <label for="sdAge">Écart-type âge</label>
                            <input type="number" id="sdAge" name="sdAge" step="0.1" min="0">
                        </div>
                    </div>
                </section>

                <section class="form-section">
                    <h2>Activité sportive</h2>
                    <div class="form-group">
                        <label for="sportName">Nom du sport</label>
                        <input type="text" id="sportName" name="sportName">
                    </div>
                    <div class="form-group">
                        <label for="sportLevel">Niveau de pratique</label>
                        <input type="text" id="sportLevel" name="sportLevel">
                    </div>
                </section>

                <section class="form-section">
                    <h2>Variables de l'étude</h2>
                    
                    <h3>Variable Dépendante (VD)</h3>
                    <div class="form-group">
                        <label for="vdName">Nom de la VD</label>
                        <input type="text" id="vdName" name="vdName">
                    </div>
                    <div class="form-group">
                        <label for="vdCategory">Catégorie VD</label>
                        <input type="text" id="vdCategory" name="vdCategory">
                    </div>
                    <div class="form-group">
                        <label for="vdMeasure">Mesure de la VD</label>
                        <input type="text" id="vdMeasure" name="vdMeasure">
                    </div>

                    <h3>Variable Indépendante (VI)</h3>
                    <div class="form-group">
                        <label for="viName">Nom de la VI</label>
                        <input type="text" id="viName" name="viName">
                    </div>
                    <div class="form-group">
                        <label for="viCategory">Catégorie VI</label>
                        <input type="text" id="viCategory" name="viCategory">
                    </div>
                    <div class="form-group">
                        <label for="viMeasure">Mesure de la VI</label>
                        <input type="text" id="viMeasure" name="viMeasure">
                    </div>
                </section>

                <section class="form-section">
                    <h2>Relations statistiques</h2>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="degreR">Coefficient r</label>
                            <input type="number" id="degreR" name="degreR" step="0.001" min="-1" max="1">
                        </div>
                        <div class="form-group">
                            <label for="degreP">Valeur p</label>
                            <input type="number" id="degreP" name="degreP" step="0.001" min="0" max="1">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="degreBeta">Coefficient Beta</label>
                            <input type="number" id="degreBeta" name="degreBeta" step="0.001">
                        </div>
                        <div class="form-group">
                            <label for="resultatRelation">Résultat de la relation</label>
                            <input type="text" id="resultatRelation" name="resultatRelation">
                        </div>
                    </div>
                </section>

                <section class="form-section">
                    <h2>Médiateurs et Modérateurs</h2>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="mediator">Médiateur</label>
                            <input type="text" id="mediator" name="mediator">
                        </div>
                        <div class="form-group">
                            <label for="moderator">Modérateur</label>
                            <input type="text" id="moderator" name="moderator">
                        </div>
                    </div>
                </section>

                <div class="form-actions">
                    <button type="button" id="previewChanges" class="btn-secondary">Prévisualiser les modifications</button>
                    <button type="submit" id="saveChanges" class="btn-primary">Sauvegarder les modifications</button>
                </div>
            </form>
        </div>
    </main>
<script src="./js/api-config.js"></script>
    <script src="./modify-analysis/modify-analysis.js"></script>

    <footer>
        <p>&copy; 2025 – IA-DAS. Tous droits réservés.</p>
    </footer>
</body>

</html>