<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <title>Interrogation personnalisÃ© de l'ontologie</title>
    <link rel="stylesheet" href="./doctor-page/doctor-page.css">
    <link rel="stylesheet" href="./input-intorregation-component/input-intorregation-component.css">
    <link rel="stylesheet" href="./graph-component/graph-component.css">
    <link rel="stylesheet" href="./analysis-panel/analysis-panel.css">
    <!-- âœ… NOUVEAU : CSS pour le loading -->
    <link rel="stylesheet" href="./components/loading-overlay.css">
</head>

<body>
    <!-- ðŸ†• Overlay d'initialisation (au dÃ©but de body) -->
    <div id="initialization-overlay" class="init-overlay">
        <div class="init-content">
            <div class="init-logo">
                <img src="./../assets/logo_IA-DAS-No-Background.png" alt="Logo IA-DAS" style="max-width: 150px;">
            </div>
            <h2>Initialisation d'IA-DAS</h2>
            <p>PrÃ©paration de la base de donnÃ©es en cours...</p>
            <p class="init-subtext">Cette Ã©tape ne prend qu'une minute, puis tout sera rapide !</p>
            <div class="init-spinner"></div>
        </div>
    </div>

    <!-- âœ… Overlay de chargement pour les recherches -->
    <div id="loading-overlay" class="loading-overlay hidden">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <h3 id="loading-title">Chargement des donnÃ©es...</h3>
            <div id="loading-steps">
                <div class="step" id="step-warmup">
                    <span class="step-icon">ðŸ”¥</span>
                    <span class="step-text">PrÃ©paration de Fuseki...</span>
                </div>
                <div class="step" id="step-query">
                    <span class="step-icon">ðŸŽ¯</span>
                    <span class="step-text">ExÃ©cution de la requÃªte...</span>
                </div>
                <div class="step" id="step-parsing">
                    <span class="step-icon">ðŸ“Š</span>
                    <span class="step-text">Traitement des rÃ©sultats...</span>
                </div>
            </div>
            <div class="progress-bar">
                <div id="progress-fill" class="progress-fill"></div>
            </div>
            <div id="loading-details">Initialisation...</div>
            <div id="loading-timer">Temps Ã©coulÃ©: <span id="timer-value">0s</span></div>
        </div>
    </div>

    <header>
        <h1>Projet IA-DAS</h1>
        <img src="./../assets/logo_IA-DAS-No-Background.png" alt="Logo IA-DAS" class="logo">
        <button id="switchChercheur" onclick="window.location.href='./index.html'" disabled>Accueil</button>
    </header>

    <div class="content-container">
        <input-intorregation-component></input-intorregation-component>
       
        <div id="results">
            <div id="result-controls" style="display: none; margin-bottom: 20px;">
                <button id="viewTable" class="view-btn active" disabled>Tableau</button>
                <button id="viewGraph" class="view-btn" disabled>Graphique</button>
                <button id="viewSparql" class="view-btn" disabled>SPARQL</button>
            </div>
            
            <div id="result-display"></div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>

    <!-- ðŸ†• NOUVEAU : Page initializer EN PREMIER -->
    <script src="./components/page-initializer.js"></script>
    <!-- âœ… Loading manager -->
    <script src="./components/loading-manager.js"></script>

    <!-- âœ… ORDRE CORRIGÃ‰ : Excel-loader EN PREMIER -->
    <script src="./data/excel-loader.js"></script>
    
    <!-- âœ… Puis D3.js (requis par graph-renderer) -->
    <script src="https://d3js.org/d3.v7.min.js"></script>
    
    <!-- âœ… Puis les composants qui utilisent window.csvLoader -->
    <script src="./analysis-panel/analysis-panel.js"></script>
    <script src="./graph-component/graph-component.js"></script>
    <script src="./graph-component/data-parser.js"></script>
    <script src="./graph-component/graph-renderer.js"></script>
    
    <!-- âœ… Puis les autres composants -->
    <script src="./input-intorregation-component/input-intorregation-component.js"></script>
    <script src="./doctor-page/doctor-page.js"></script>
   
</body>

<footer>
    <p>&copy; 2025 â€“ IA-DAS. Tous droits rÃ©servÃ©s.</p>
</footer>

</html>