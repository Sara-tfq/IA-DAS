<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Guide Complet - Pipeline Ontologie IA-DAS</title>
    <style>
        body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            max-width: 1400px; 
            margin: 0 auto; 
            padding: 20px; 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            line-height: 1.6;
        }
        .container {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }
        h1 { 
            color: #2c5aa0; 
            text-align: center; 
            border-bottom: 4px solid #2c5aa0; 
            padding-bottom: 15px;
            margin-bottom: 30px;
            font-size: 2.5em;
        }
        h2 { 
            color: #d9534f; 
            border-bottom: 3px solid #d9534f; 
            padding-bottom: 8px;
            margin-top: 40px;
            font-size: 1.8em;
        }
        h3 {
            color: #5cb85c;
            margin-top: 30px;
            font-size: 1.4em;
        }
        .step { 
            background: #f8f9fa; 
            margin: 20px 0; 
            padding: 25px; 
            border-radius: 10px; 
            border-left: 5px solid #2c5aa0;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }
        .command { 
            background: #2d3748; 
            color: #e2e8f0;
            border: 1px solid #4a5568; 
            padding: 15px; 
            margin: 10px 0; 
            border-radius: 8px; 
            font-family: 'Courier New', monospace; 
            white-space: pre-wrap; 
            overflow-x: auto; 
        }
        .file-structure {
            background: #e8f5e8;
            border: 1px solid #c3e6c3;
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
            font-family: monospace;
        }
        .warning { 
            background: #fff3cd; 
            border: 1px solid #ffeaa7;
            border-left: 4px solid #f39c12; 
            padding: 15px; 
            margin: 15px 0; 
            border-radius: 5px; 
        }
        .success { 
            background: #d4edda; 
            border: 1px solid #c3e6cb;
            border-left: 4px solid #28a745; 
            padding: 15px; 
            margin: 15px 0; 
            border-radius: 5px; 
        }
        .info { 
            background: #d1ecf1; 
            border: 1px solid #bee5eb;
            border-left: 4px solid #17a2b8; 
            padding: 15px; 
            margin: 15px 0; 
            border-radius: 5px; 
        }
        .code-block {
            background: #f1f3f4;
            border: 1px solid #dadce0;
            padding: 15px;
            margin: 10px 0;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            overflow-x: auto;
        }
        .table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        .table th, .table td {
            border: 1px solid #dee2e6;
            padding: 12px;
            text-align: left;
        }
        .table th {
            background-color: #e9ecef;
            font-weight: bold;
        }
        .nav-menu {
            background: #495057;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 30px;
        }
        .nav-menu a {
            color: white;
            text-decoration: none;
            margin: 0 15px;
            padding: 8px 15px;
            border-radius: 5px;
            transition: background 0.3s;
        }
        .nav-menu a:hover {
            background: #6c757d;
        }
        .requirement {
            display: flex;
            align-items: center;
            margin: 10px 0;
        }
        .requirement .check {
            color: #28a745;
            font-weight: bold;
            margin-right: 10px;
        }
    </style>
</head>
<body>

<div class="container">

<h1>Guide Complet - Pipeline Ontologie IA-DAS</h1>

<div class="nav-menu">
    <strong>Navigation rapide :</strong>
    <a href="#prerequis">Prerequis</a>
    <a href="#structure">Structure</a>
    <a href="#etapes">Etapes</a>
    <a href="#fuseki">Fuseki</a>
    <a href="#requetes">Requetes</a>
    <a href="#troubleshooting">Depannage</a>
</div>

<div class="info">
<strong>Objectif :</strong> Ce guide vous permet de creer une ontologie complete IA-DAS a partir de fichiers Excel, en passant par le nettoyage des donnees, la creation de mappings RML, et la generation des fichiers TTL pour Fuseki.
</div>

<h2 id="prerequis">Prerequis et Installation</h2>

<div class="step">
<h3>Logiciels requis</h3>
<div class="requirement"><span class="check">OK</span> Python 3.7+ installe</div>
<div class="requirement"><span class="check">OK</span> Java 8+ installe (pour RMLMapper)</div>
<div class="requirement"><span class="check">OK</span> Apache Jena Fuseki (optionnel, pour les requetes SPARQL)</div>

<h3>Fichiers de depart necessaires</h3>
<div class="requirement"><span class="check">OK</span> <strong>IA-DAS-Data.csv</strong> - Donnees principales (format Excel vers CSV)</div>
<div class="requirement"><span class="check">OK</span> <strong>Sport-Hierarchy.csv</strong> - Hierarchie des sports</div>
<div class="requirement"><span class="check">OK</span> <strong>Class-Hierarchy-V1.csv</strong> - Hierarchie des variables</div>
<div class="requirement"><span class="check">OK</span> <strong>rmlmapper-7.3.3-r374-all.jar</strong> - Outil RML Mapper</div>
</div>

<h2 id="etapes">Etapes du Pipeline Complet</h2>

<h3>Etape 1 : Preparation des Donnees Sports</h3>

<div class="step">
<h4>1.1 Nettoyage de la hierarchie des sports</h4>
<div class="warning">
<strong>Probleme :</strong> Le fichier Sport-Hierarchy.csv contient 16383 colonnes dont la plupart sont vides.
</div>

<div class="command">python clean_sport_hierarchy.py</div>

<strong>Resultat :</strong> Reduit de 16383 a 5 colonnes utiles
<div class="code-block">Colonnes conservees :
- Class 1 (sport principal)
- Sub class 2 (sous-categorie)
- Sub class 3 (specialite)
- Definition (definition)
- References (sources)</div>

<h4>1.2 Conversion des separateurs</h4>
<div class="command">python convert_csv_separator.py</div>
<strong>Action :</strong> Convertit les separateurs ; en , pour compatibilite RML

<h4>1.3 Creation du mapping RML pour les sports</h4>
<div class="info">
Le fichier <strong>mapping/mapping-sport.ttl</strong> cree la hierarchie des sports avec rdfs:subClassOf
</div>

<h4>1.4 Generation de l'ontologie des sports</h4>
<div class="command">java -jar rmlmapper-7.3.3-r374-all.jar -m mapping/mapping-sport.ttl -o output/sport-hierarchy.ttl</div>

<h4>1.5 Nettoyage des URIs</h4>
<div class="command">python clean_ttl_uris.py</div>
<div class="success">
<strong>Resultat :</strong> 80 URIs nettoyees (ex: 100%20meters vers 100_meters)
</div>
</div>

<h3>Etape 2 : Preparation des Variables</h3>

<div class="step">
<h4>2.1 Nettoyage de la hierarchie des variables</h4>
<div class="command">python clean_variables_csv.py</div>
<strong>Resultat :</strong> Reduit de 42 a environ 5 colonnes utiles

<h4>2.2 Creation du mapping RML pour les variables</h4>
<div class="warning">
<strong>Important :</strong> Ne pas utiliser SKOS pour les variables selon les exigences du tuteur
</div>

<h4>2.3 Generation de l'ontologie des variables</h4>
<div class="command">java -jar rmlmapper-7.3.3-r374-all.jar -m mapping/mapping-hierarchy.ttl -o output/variable-hierarchy.ttl</div>

<div class="success">
<strong>Resultat :</strong> 557 URIs nettoyees dans la hierarchie des variables
</div>
</div>

<h3>Etape 3 : Preparation des Donnees Principales</h3>

<div class="step">
<h4>3.1 Nettoyage du fichier principal</h4>
<div class="command">python clean_main_data.py</div>
<div class="info">
<strong>Transformation :</strong>
<ul>
<li>Lignes : 8211 vers 8209</li>
<li>Colonnes : 151 vers 85</li>
<li>Suppression des colonnes et lignes vides</li>
</ul>
</div>

<h4>3.2 Creation d'Analysis_IDs uniques</h4>
<div class="warning">
<strong>Probleme critique :</strong> Plusieurs lignes partagent le meme Analysis_ID, causant des ecrasements de donnees
</div>

<div class="command">python create_unique_analysis_ids.py</div>

<div class="success">
<strong>Solution :</strong> Creation d'IDs uniques avec suffixes
<br>Exemple : ID 1200 devient vers 1200, 1200.1, 1200.2, 1200.3
<br><strong>Resultat :</strong> 2013 IDs originaux vers 4494 IDs uniques
</div>
</div>


<h3>Etape 5 : Generation de l'Ontologie Finale</h3>

<div class="step">
<h4>5.1 Execution du RML Mapper</h4>
<div class="command">java -jar rmlmapper-7.3.3-r374-all.jar -m mapping/mapping-ontology.ttl -o output/ia-das-ontology.ttl</div>

<h4>5.2 Nettoyage des URIs finales</h4>
<div class="command">sed 's/%20/_/g' output/ia-das-ontology.ttl > output/ia-das-ontology-clean.ttl</div>

<div class="success">
<strong>Ontologie finale creee !</strong>
<br>Nombre total d'analyses : <strong>4494</strong>
<br>Taille du fichier : environ 139,697 lignes
</div>
</div>

</body>
</html>